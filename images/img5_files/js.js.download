jQuery(document).ready(function () {
    $(window).bind('mousewheel', function(e){
        var fimagesc = jQuery('.fimages_area');
        if (fimagesc.length){
            closefimages(fimagesc);
        }
    });
    $(window).scroll(function () {
        var fimagesc = jQuery('.fimages_area');
        if (fimagesc.length){
            closefimages(fimagesc);
        }
    });
    $("[class*='slider_']").each(function(){
        let classes = $(this).attr('class');
        let match =  classes.match(/slider_(.*\d)/gm);
        //console.log(match);
        if(match && match.length > 0){
            UIkit.util.on("." + match[0], "itemshown", function(e) {
                let _this = $(this);
                //console.log(_this);
                //console.log(this);
                var sliderItems = _this.find('.uk-slider-items').children().length;
                var sliderItem = e.detail[0].index;
                // console.log(_this.find('.uk-slider-items').children().length);
                // console.log(e.detail[0].index);
                //console.log(sliderItems,sliderItem);
                //var activeElText = _this.find(".tm-blog-slider-counter").text();
                setTimeout(function(){
                    _this.find(".counter-block").text((Number(sliderItem) + 1) + '/' + sliderItems);
                    $(window).trigger('resize');
                },80);
                //console.log('click');
            });
        }
    });
});

function submit_cusform1(f) {    
    var $f_action = $(f).attr('action');
    
    if (validate_cusform1(f)) {
        $.ajax({
            url: $f_action,
            dataType: "json",
            type: "post",
            data: $(f).serialize() + "&sentfrom=" + encodeURIComponent(window.location.href),
            success: function( data ) {
                //console.log(data);
                if (data.success){
                    if (data.text != null){
                        alert(data.text);
                    }
                    $(f)[0].reset();
                    $(f).closest('#tm-com').find('.uk-close').trigger('click');
                } else {
                    if (data.error_txt != null){
                        alert(data.error_txt);
                    }
                }
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert(textStatus);
            }
        });
    }
    return false;
}

function validate_cusform1(f) {
    var $errors = false;
    
    $(f).find('.required').each(function ($k, $c){
        if ($($c).val() == '') {
            $($c).addClass('uk-form-danger');            
            $errors = true;
        } else {
            $($c).removeClass('uk-form-danger');
        }
    });
    
    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    
    $(f).find('.email').each(function ($k, $c){
        if (!regex.test($($c).val())) {
            $($c).addClass('uk-form-danger');            
            $errors = true;
        } else {
            $($c).removeClass('uk-form-danger');
        }
    });
    
    return !$errors;
}
